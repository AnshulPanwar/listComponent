# Contributing to Design System Components

We’d love for you to contribute and make Design System Components for the web even better than it is today!
Here are the guidelines we want you to follow:

- [General Contributing Guidelines](#general-contributing-guidelines)
- [Development Process](#development-process)
  - [Setting up your development environment](#setting-up-your-development-environment)
  - [Building Components](#building-components)
  - [Running the development server](#running-the-development-server)
  - [Building LEGOS](#building-LEGOS)
  - [Linting / Testing / Coverage Enforcement](#linting--testing--coverage-enforcement)
    - [Running Tests across browsers](#running-tests-across-browsers)
  - [Coding Style](#coding-style)
  - [Submitting Pull Requests](#submitting-pull-requests)

## General Contributing Guidelines

The LEGOS Team welcomes your contributions. Please take a few minutes to read through this document and become familiar with our policies and suggest workflows.

## Development Process

This section should get you up and running working on the design system codebase. Before beginning development, you may want to read through our  [developer guide](./docs/developer.md) to get a better understanding of our overall architecture.

### Setting up your development environment

You’ll need the most recent version of [nodejs](https://nodejs.org/en/) LTS to work on the design system.

> **NOTE**: If you expect to commit updated or new dependencies, please ensure you are using npm 5.0.3, which will
> also update `package-lock.json` correctly when you install or upgrade packages.

> **NOTE**: We currently do not commit package-lock.json to the repo as this has proven problematic.

Once node is installed, simply clone our repo (or your fork of it) and run `npm install`

```shell
git clone https://github.carmax.com/CarMax/online-systems-legos.git# or a path to your fork
cd online-systems-legos && npm i
```

### Building Components

#### Local development

```shell
npm run dev
```

`npm run dev` runs a [webpack](https://webpack.js.org/) instance which compiles the source and watches the file system for changes. There is no development server in this repo, and the [Online Systems Styleguide](https://github.carmax.com/CarMax/online-systems-legos-styleguide) is used by LEGOS Team developers as a test server.


### Building LEGOS

```shell
npm run build # Builds a minfied version of LEGOS within public/
npm run dev # Same as above, but in 'development' mode with a file system watcher enabled
```

### Linting

Linting is performed whenever a JavaScript or SCSS file is compiled (e.g. in build or dev mode), meaning there is no 'lint' command or script which you must run.

As a convenience, a lint script has been set up:

````shell
npm run lint:js # will run eslint on-demand
````

For JavaScript we extend the AirBNB ESLint rules configuration.

For SCSS we use our own SCSSLint rules configuration.

### Testing

JavaScript unit tests are required. In order to complete a pull request, you must include passing [Jest](http://facebook.github.io/jest/) test suites along with the new or modified JavaScript files.

Each JavaScript file should be accompanyed by a dedicated Jest '.spec.js' test file in the same directory. For example, foo.js and foo.spec.js

Two development dependencies are required for successfully writing tests for React: [Sinon](http://sinonjs.org/) and [Enzyme](http://airbnb.io/enzyme/).

Enzyme is “a JavaScript Testing utility for React that makes it easier to assert, manipulate, and traverse your React Components’ output”.

Sinon provides “standalone and test framework agnostic JavaScript test spies, stubs and mocks”.

```shell
npm test # Runs Jest (note the command does not use 'run')
```

#### Running Tests across browsers

If you’re making big changes or developing new components, we encourage you to test your changes across browsers and devices! At CarMax Shockoe, we use [BrowserStack](https://www.browserstack.com/local-testing) for local testing.

### Coding Style

Our SCSS and JS coding style is enforced automatically through the use of linters. Check out our [eslint config](path) and our [scsslint config](path)

### Submitting Pull Requests

When submitting PRs, make sure you’re familiar our [commit message](./DEVELOPER.md) guidelines.

When submitting PRs for large changes, be sure to include an adequate background in the description so that reviewers of the PR know what the changes entail at a high-level, the motivations for makingthese changes, and what they affect.

> **NOTE**: The design system project repo has both *pull request* and *issue* templates which will guide you/

[js-style-guide]: https://github.carmax.com/CarMax/online-systems-legos/wiki/JavaScript-Coding-Style-Guide
[css-style-guide]: https://github.carmax.com/CarMax/online-systems-legos/wiki/CSS-Coding-Style-Guide
[html-style-guide]: https://github.carmax.com/CarMax/online-systems-legos/wiki/HTML-Coding-Style-Guide
