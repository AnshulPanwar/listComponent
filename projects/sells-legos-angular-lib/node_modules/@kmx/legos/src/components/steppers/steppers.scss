@import '../../styles/foundation/typography/variables';
@import '../../styles/foundation/typography/mixins';
@import '../../styles/foundation/theme/kmx-theme';

.kmx-stepper {
    display: inline-flex;
    .kmx-stepper-form {
        width: 100%;
    }
    .stepper-link {
        text-decoration: none;
        /* stylelint-disable declaration-no-important */
        color: $kmx-blue-500 !important;
        /* stylelint-enable declaration-no-important */
    }
    .stepper-list {
        display: inline-block;
        vertical-align: top;
        min-width: 150px; // arbitrary width calculated at the widest active (bold type) label; helps prevent the 'shimmy' seen when traversing the stepper's steps.
    }
    .container-card-raised {
        @include kmx-elevation('2');

        display: inline-flex;
        flex-direction: column;
        justify-content: space-between;

        margin-bottom: size(xl);
        width: 100%;
        @include mq($from: medium) {
            width: 316px;
            margin-right: size(xl);
        }
        .card-inner {
            padding: size(l) size(l) 0;
            & > [class*="kmx-typography--"] {
                margin-top: 0;

                + .kmx-text-field {
                    margin-top: 0;
                }
            }
        }
        .kmx-typography--font-main {
            color: $kmx-blue-500;
        }
        .kmx-stepper-buttons {
            justify-content: space-between;
            display: flex;
            margin: size(m) 0;
        }
        &__mobile {
            @extend .container-card-raised;
        }
    }
    .container-card-raised__mobile.container-card-raised__mobile {
        margin-bottom: 0;
        margin-right: 0;
    }
    .kmx-stepper-icon {
        align-items: center;
        background-color: $kmx-blue-500;
        border: none;
        border-radius: 100%;
        color: $white;
        display: inline-flex;
        font-family: $kmx-typography-font-main;
        font-size: rem-calc(14);
        height: size(l);
        justify-content: center;
        position: relative;
        width: size(l);
        &__inactive {
            @extend .kmx-stepper-icon;
            background-color: $grey-500;
        }
        &__completed {
            @extend .kmx-stepper-icon;
            background-color: $kmx-yellow-500;

            /* stylelint-disable selector-max-type */
            svg {
                color: $kmx-blue-500;
                height: size(m);
                min-width: 0;
                position: relative;
                top: 1px;
                width: size(m); // Needed for IE
            }
            /* stylelint-enable */
        }
    }
    .kmx-stepper-label {
        background-color: transparent;
        border: none;
        color: $kmx-blue-500;
        display: inline-flex;
        font-family: $kmx-typography-font-alt;
        font-size: rem-calc(16);
        font-weight: map-get($kmx-typography-font-weight-values, bold);
        margin-left: size(s);
        &__inactive {
            @extend .kmx-stepper-label;
            color: $grey-400;
            font-weight: map-get($kmx-typography-font-weight-values, regular);
            font-size: rem-calc(14);
        }
        &__completed {
            @extend .kmx-stepper-label;
            font-size: rem-calc(14);
            font-weight: map-get($kmx-typography-font-weight-values, regular);
        }
    }
    .kmx-stepper-icon-independent {
        align-items: center;
        background-color: $kmx-blue-500;
        border: none;
        border-radius: 100%;
        color: $white;
        display: inline-flex;
        font-family: $kmx-typography-font-main;
        font-size: rem-calc(14);
        height: size(l);
        justify-content: center;
        position: relative;
        width: size(l);
        &__inactive {
            @extend .kmx-stepper-icon;
            background-color: $grey-600;
        }
        &__completed {
            @extend .kmx-stepper-icon;
            background-color: $kmx-yellow-500;
        }
    }
    .kmx-stepper-label-independent {
        background-color: transparent;
        border: none;
        color: $kmx-blue-500;
        display: inline-flex;
        font-family: $kmx-typography-font-alt;
        font-size: rem-calc(16);
        font-weight: map-get($kmx-typography-font-weight-values, bold);
        margin-left: size(s);
        &__inactive {
            @extend .kmx-stepper-label;
            color: $grey-900;
            font-family: $kmx-typography-font-alt;
            font-size: rem-calc(14);
            font-weight: map-get($kmx-typography-font-weight-values, regular);
        }
        &__completed {
            @extend .kmx-stepper-label;
            font-size: rem-calc(14);
            font-weight: map-get($kmx-typography-font-weight-values, regular);
        }
    }
    .kmx-stepper-separator {
        display: flex;
        height: 16px;
        &__dependent {
            @extend .kmx-stepper-separator;
            border-left: 2px solid $grey-400;
            margin-bottom: size(s);
            margin-left: 11px;
            margin-top: size(s);
        }
    }
    .stepper-button {
        @extend .stepper-link;
        background-color: transparent;
        border: none;
        font-family: $kmx-typography-font-main;
        font-size: rem-calc(12);
        line-height: 1.15;
        &--next {
            @extend .stepper-button;
            /* stylelint-disable declaration-no-important */
            color: $grey-500 !important;
            /* stylelint-enable declaration-no-important */
        }
        &--disabled {
            visibility: hidden;
            pointer-events: none;
        }
        &--right {
            @extend .stepper-button;
            float: right;
        }
    }
    .kmx-stepper-buttons__mobile {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        margin-bottom: size(s);
        height: 46px;
        .kmx-stepper-buttons-label {
            order: 1;
        }
        .stepper-button:first-child {
            order: 0;
        }
        .stepper-button--right {
            order: 2;
        }
        .mobile-title {
            color: $grey-900;
            display: block;
            font-family: $kmx-typography-font-alt;
            font-size: rem-calc(14);
            font-weight: map-get($kmx-typography-font-weight-values, bold);
            text-align: center;
            padding-top: 5px;
            padding-bottom: 3px;
        }
        .mobile-subtitle {
            color: $grey-700;
            display: block;
            font-family: $kmx-typography-font-alt;
            font-size: rem-calc(12);
            font-weight: map-get($kmx-typography-font-weight-values, regular);
            text-align: center;
        }
        .mdc-linear-progress {
            bottom: 30px;
        }
        .svg-icon {
            /* stylelint-disable selector-max-type */
            svg {
                fill: $kmx-blue-500;
                height: size(xl);
                width: size(xl); // Needed for IE
                margin: 0 size(m);
            }
            /* stylelint-enable */
        }
        .svg-icon-incomplete {
            @extend .svg-icon;
            /* stylelint-disable selector-max-type */
            svg {
                fill: $grey-500;
                height: size(xl);
                width: size(xl); // Needed for IE
                margin: 0 size(m);
            }
            /* stylelint-enable */
        }
        .svg-icon-completed {
            @extend .svg-icon;
            /* stylelint-disable selector-max-type */
            svg {
                fill: $kmx-blue-500;
                height: size(xl);
                width: size(xl);
                background-color: $kmx-yellow-500;
                border-radius: 100%;
                margin: 0 size(m);
            }
            /* stylelint-enable */
        }
    }
}
